<!DOCTYPE html>

<html>
<head>
  <title>UsersMemMemory.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="..\..\..\docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>UsersMemMemory.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMemModel</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p>Lista de usuarios almacenados en memoria.
@type {Array&lt;{id: number, name: string, price: number}&gt;}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = [
            { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Escritorio&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">120000</span> },
            { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Mesa&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">90000</span> },
            { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Velador&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">15000</span> }
        ];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <p>Obtiene todos los usuarios almacenados.
@returns {Promise&lt;Array&lt;{id: number, name: string, price: number}&gt;&gt;} Lista de usuarios.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getuser = <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <p>Crea un nuevo usuario y lo agrega a la lista.
@param {Object} data - Datos del nuevo usuario (name, price).
@param {string} data.name - Nombre del usuario.
@param {number} data.price - Precio asociado al usuario.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    postUser = <span class="hljs-keyword">async</span> (data) =&gt; {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <p>Asigna un nuevo ID.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.<span class="hljs-property">id</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">id</span> + <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <p>Agrega el usuario a la lista.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">push</span>(data);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <p>Devuelve el usuario agregado.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> data;  
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <p>Actualiza parcialmente un usuario en la lista.
@param {number} id - ID del usuario a actualizar.
@param {Object} data - Datos para actualizar el usuario (name, price).
@throws {Error} Si el usuario no existe.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    patchUser = <span class="hljs-keyword">async</span> (id, data) =&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-property">id</span> == id);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>Si no se encuentra el índice, lanza un error.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;El índice no existe.&quot;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <p>Mezcla los datos actuales con los nuevos.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">const</span> updateUser = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>[index], ...data };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <p>Reemplaza el usuario con el nuevo objeto.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>, updateUser);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <p>Devuelve el usuario actualizado.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">return</span> updateUser;  
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;La actualización parcial de usuarios no se pudo completar.&quot;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <p>Vuelve a lanzar el error para que sea manejado por el controlador o el servicio.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">throw</span> error;  
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <p>Actualiza completamente un usuario en la lista.
@param {number} id - ID del usuario a actualizar.
@param {Object} data - Datos para actualizar el usuario (name, price).
@throws {Error} Si el usuario no existe.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    putUser = <span class="hljs-keyword">async</span> (id, data) =&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-property">id</span> == id);</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <p>Si no se encuentra el índice, lanza un error.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;El índice no existe.&quot;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <p>Mezcla los datos actuales con los nuevos.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">const</span> updateUser = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>[index], ...data };</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <p>Reemplaza el usuario con el nuevo objeto.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>, updateUser);</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <p>Devuelve el usuario actualizado.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">return</span> updateUser;  
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;La actualización total de usuarios no se pudo completar.&quot;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <p>Vuelve a lanzar el error para que sea manejado por el controlador o el servicio.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">throw</span> error;  
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <p>Elimina un usuario por su ID.
@param {number} id - ID del usuario a eliminar.
@throws {Error} Si el usuario no existe.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    deleteuser = <span class="hljs-keyword">async</span> (id) =&gt; {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.<span class="hljs-property">id</span> == id);
        <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-21">&#x00a7;</a>
              </div>
              <p>Si no se encuentra el índice, lanza un error.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;El índice no existe.&quot;</span>);  
        } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-22">&#x00a7;</a>
              </div>
              <p>Elimina el usuario de la lista.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-23">&#x00a7;</a>
              </div>
              <p>Mensaje indicando que el usuario fue eliminado.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;El usuario se eliminó correctamente.&quot;</span>;  
        }
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">UserMemModel</span>;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
